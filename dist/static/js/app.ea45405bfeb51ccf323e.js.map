{"version":3,"sources":["webpack:///node_modules/vue-awesome/components/Icon.vue","webpack:///./node_modules/vue-awesome/components/Icon.vue?5f72","webpack:///./node_modules/vue-awesome/components/Icon.vue","webpack:///./src/App.vue?c1c2","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?b31e","webpack:///./src/components/Home.vue","webpack:///./src/components/Login.vue?71c2","webpack:///./src/components/Login.vue","webpack:///src/components/Login.vue","webpack:///src/components/Listen.vue","webpack:///./src/components/Listen.vue?023a","webpack:///./src/components/Listen.vue","webpack:///./src/components/NotFound.vue?6d01","webpack:///./src/components/NotFound.vue","webpack:///src/components/NotFound.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["icons","Icon","String","val","warn","Boolean","scale","this","outerScale","spin","inverse","pulse","name","height","_icon","icon","raw","uniqueId","pointerId","id","match","_this","normalizedScale","width","d","points","cursor","components_Icon","render","_vm","_h","$createElement","_c","_self","class","klass","style","attrs","version","role","label","aria-label","x","y","viewBox","box","_t","paths","_l","path","i","_b","key","_e","_v","polygons","polygon","domProps","innerHTML","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","selectortype_template_index_0_src_App","staticClass","href","target","src_App","Home","toUpperCase","now","spotifyPlayer","playerReady","then","res","data","catch","err","pathname","message","state","device_id","switchToPlayer","connect","player","accessToken","_this2","success","context","paused","timestamp","track_window","$socket","emit","sharedState","setupStream","_this3","startTime","components_Home","directives","rawName","value","expression","modifiers","fullscreen","lock","lg","span","offset","sm","xs","slot","type","on","click","$event","openSpotify","plain","playDemo","url","room","arg","roomInUse","undefined","model","callback","$$v","src_components_Home","Home_normalizeComponent","components_Login","src_components_Login","Login_normalizeComponent","Listen","amount","getCurrentState","position","shouldBeAt","sync","calculateOffset","list","_this4","pause","uri","resume","components_Listen","md","gutter","src","track","image","artists","round","resync","src_components_Listen","Listen_normalizeComponent","components_NotFound","src_components_NotFound","NotFound_normalizeComponent","vue_esm","use","vue_router_esm","router","mode","routes","component","redirect","element_ui_common_default","a","vue_clipboard_default","build_default","Object","defineProperty","prototype","axios_default","config","productionTip","el","template","components","App"],"mappings":"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","file":"static/js/app.ea45405bfeb51ccf323e.js","sourcesContent":["<template>\n  <svg version=\"1.1\"\n    :class=\"klass\"\n    :role=\"label ? 'img' : 'presentation'\"\n    :aria-label=\"label\"\n    :x=\"x\"\n    :y=\"y\"\n    :width=\"width\"\n    :height=\"height\"\n    :viewBox=\"box\"\n    :style=\"style\">\n    <slot>\n      <template v-if=\"icon && icon.paths\">\n        <path v-for=\"(path, i) in icon.paths\" :key=\"`path-${i}`\" v-bind=\"path\"/>\n      </template>\n      <template v-if=\"icon && icon.polygons\">\n        <polygon v-for=\"(polygon, i) in icon.polygons\" :key=\"`polygon-${i}`\" v-bind=\"polygon\"/>\n      </template>\b\n      <template v-if=\"icon && icon.raw\"><g v-html=\"raw\"></g></template>\n    </slot>\n  </svg>\n</template>\n\n<style>\n.fa-icon {\n  display: inline-block;\n  fill: currentColor;\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-spin {\n  animation: fa-spin 1s 0s infinite linear;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.fa-pulse {\n  animation: fa-spin 1s infinite steps(8);\n}\n\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n\n<script>\nlet icons = {}\n\nexport default {\n  name: 'icon',\n  props: {\n    name: {\n      type: String,\n      validator (val) {\n        if (val) {\n          if (!(val in icons)) {\n            console.warn(`Invalid prop: prop \"name\" is referring to an unregistered icon \"${val}\".` +\n              `\\nPlesase make sure you have imported this icon before using it.`)\n            return false\n          }\n          return true\n        }\n        console.warn(`Invalid prop: prop \"name\" is required.`)\n        return false\n      }\n    },\n    scale: [Number, String],\n    spin: Boolean,\n    inverse: Boolean,\n    pulse: Boolean,\n    flip: {\n      validator (val) {\n        return val === 'horizontal' || val === 'vertical'\n      }\n    },\n    label: String\n  },\n  data () {\n    return {\n      x: false,\n      y: false,\n      childrenWidth: 0,\n      childrenHeight: 0,\n      outerScale: 1\n    }\n  },\n  computed: {\n    normalizedScale () {\n      let scale = this.scale\n      scale = typeof scale === 'undefined' ? 1 : Number(scale)\n      if (isNaN(scale) || scale <= 0) {\n        console.warn(`Invalid prop: prop \"scale\" should be a number over 0.`, this)\n        return this.outerScale\n      }\n      return scale * this.outerScale\n    },\n    klass () {\n      return {\n        'fa-icon': true,\n        'fa-spin': this.spin,\n        'fa-flip-horizontal': this.flip === 'horizontal',\n        'fa-flip-vertical': this.flip === 'vertical',\n        'fa-inverse': this.inverse,\n        'fa-pulse': this.pulse\n      }\n    },\n    icon () {\n      if (this.name) {\n        return icons[this.name]\n      }\n      return null\n    },\n    box () {\n      if (this.icon) {\n        return `0 0 ${this.icon.width} ${this.icon.height}`\n      }\n      return `0 0 ${this.width} ${this.height}`\n    },\n    ratio () {\n      if (!this.icon) {\n        return 1\n      }\n      let { width, height } = this.icon\n      return Math.max(width, height) / 16\n    },\n    width () {\n      return this.childrenWidth || this.icon && this.icon.width / this.ratio * this.normalizedScale || 0\n    },\n    height () {\n      return this.childrenHeight || this.icon && this.icon.height / this.ratio * this.normalizedScale || 0\n    },\n    style () {\n      if (this.normalizedScale === 1) {\n        return false\n      }\n      return {\n        fontSize: this.normalizedScale + 'em'\n      }\n    },\n    raw () {\n      // generate unique id for each icon's SVG element with ID\n      if (!this.icon || !this.icon.raw) {\n        return null\n      }\n      let raw = this.icon.raw\n      let ids = {}\n      raw = raw.replace(/\\s(?:xml:)?id=[\"']?([^\"')\\s]+)/g, (match, id) => {\n        let uniqueId = getId()\n        ids[id] = uniqueId\n        return ` id=\"${uniqueId}\"`\n      })\n      raw = raw.replace(/#(?:([^'\")\\s]+)|xpointer\\(id\\((['\"]?)([^')]+)\\2\\)\\))/g, (match, rawId, _, pointerId) => {\n        let id = rawId || pointerId\n        if (!id || !ids[id]) {\n          return match\n        }\n\n        return `#${ids[id]}`\n      })\n\n      return raw\n    }\n  },\n  mounted () {\n    if (this.icon) {\n      return\n    }\n    this.$children.forEach(child => {\n      child.outerScale = this.normalizedScale\n    })\n    let width = 0\n    let height = 0\n    this.$children.forEach(child => {\n      width = Math.max(width, child.width)\n      height = Math.max(height, child.height)\n    })\n    this.childrenWidth = width\n    this.childrenHeight = height\n    this.$children.forEach(child => {\n      child.x = (width - child.width) / 2\n      child.y = (height - child.height) / 2\n    })\n  },\n  register (data) {\n    for (let name in data) {\n      let icon = data[name]\n\n      if (!icon.paths) {\n        icon.paths = []\n      }\n      if (icon.d) {\n        icon.paths.push({ d: icon.d })\n      }\n\n      if (!icon.polygons) {\n        icon.polygons = []\n      }\n      if (icon.points) {\n        icon.polygons.push({ points: icon.points })\n      }\n\n      icons[name] = icon\n    }\n  },\n  icons\n}\n\nlet cursor = 0xd4937\nfunction getId () {\n  return `fa-${(cursor++).toString(16)}`\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// node_modules/vue-awesome/components/Icon.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{class:_vm.klass,style:(_vm.style),attrs:{\"version\":\"1.1\",\"role\":_vm.label ? 'img' : 'presentation',\"aria-label\":_vm.label,\"x\":_vm.x,\"y\":_vm.y,\"width\":_vm.width,\"height\":_vm.height,\"viewBox\":_vm.box}},[_vm._t(\"default\",[(_vm.icon && _vm.icon.paths)?_vm._l((_vm.icon.paths),function(path,i){return _c('path',_vm._b({key:(\"path-\" + i)},'path',path,false))}):_vm._e(),_vm._v(\" \"),(_vm.icon && _vm.icon.polygons)?_vm._l((_vm.icon.polygons),function(polygon,i){return _c('polygon',_vm._b({key:(\"polygon-\" + i)},'polygon',polygon,false))}):_vm._e(),_vm._v(\"\\b\\n    \"),(_vm.icon && _vm.icon.raw)?[_c('g',{domProps:{\"innerHTML\":_vm._s(_vm.raw)}})]:_vm._e()])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5d0258de\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/vue-awesome/components/Icon.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5d0258de\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../vue-loader/lib/selector?type=styles&index=0!./Icon.vue\")\n}\nvar normalizeComponent = require(\"!../../vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../vue-loader/lib/selector?type=script&index=0!./Icon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d0258de\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../vue-loader/lib/selector?type=template&index=0!./Icon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-awesome/components/Icon.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{attrs:{\"id\":\"app\"}},[_c('el-header',{attrs:{\"id\":\"header\"}},[_c('div',{attrs:{\"id\":\"brand\"}},[_c('a',{staticClass:\"name\",attrs:{\"href\":\"/\"}},[_vm._v(\"Spotsync\")]),_c('span',{staticClass:\"beta\"},[_vm._v(\"BETA\")])]),_c('div',{attrs:{\"id\":\"author\"}},[_c('span',[_vm._v(\"an app by\")]),_c('a',{staticClass:\"link\",attrs:{\"href\":\"https://github.com/jdtzmn\",\"target\":\"_blank\"}},[_vm._v(\"jdtzmn\")])])]),_c('el-main',{attrs:{\"id\":\"main\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-051e8eee\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-051e8eee\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-051e8eee\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n  el-container#app\n    el-header#header\n      div#brand\n        a(href='/').name Spotsync\n        span.beta BETA\n      div#author\n        span an app by\n        a.link(href='https://github.com/jdtzmn', target='_blank') jdtzmn\n    el-main#main\n      router-view\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css?family=Lato:700');\n\nbody, html {\n  margin: 0;\n  padding: 0;\n  background: #5E9FA3;\n  background: -webkit-linear-gradient(#5E9FA3, #018790);\n  background: -o-linear-gradient(#5E9FA3, #018790);\n  background: -moz-linear-gradient(#5E9FA3, #018790);\n  background: linear-gradient(#5E9FA3, #018790);\n}\n\n#app {\n  font-family: 'Lato', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nbody, html, #app {\n  min-height: 100vh;\n}\n\n#header {\n  position: fixed;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1;\n  transition: background 0.2s;\n}\n\n#header.transparent {\n  background: rgba(0, 0, 0, 0.7)\n}\n\n#brand {\n  display: inline-block;\n  margin: 15.5px;\n}\n\n#brand .name {\n  color: white;\n  font-size: 1.5em;\n  text-decoration: none;\n}\n\n#brand .beta {\n  color: white;\n  padding: 2px;\n  background: #E33258;\n  border-radius: 4px;\n  margin-left: 5px;\n}\n\n#main { margin-top: 60px; }\n\n#author {\n  color: rgb(240, 240, 240);\n  float: right;\n  margin: 20.5px;\n}\n\n#author .link {\n  color: white;\n  margin-left: 2px;\n}\n\n.footer-text { color: white; }\n\n.footer-link {\n  color: #4DABFF;\n  margin-left: 3px;\n  padding-bottom: 0;\n}\n\n/* element-ui fonts */\n\n.el-message, .el-message-box {\n  font-family: 'Lato', sans-serif;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template lang=\"pug\">\n  el-row(v-loading.fullscreen.lock='!this.device_id')\n    el-col(:lg='{ span: 10, offset: 7 }', :sm='{ span: 14, offset: 5 }', :xs='{ span: 24 }')\n      h1.header Start streaming\n      el-card.card\n        div(slot='header')\n          span Open Spotify\n          el-button.copy(\n            type='text',\n            @click=\"openSpotify('web')\"\n          ) Open Web App\n        el-button(type='success', @click='openSpotify').open\n          icon.icon(name='spotify', scale='1.2')\n          span.text Open Spotify\n      el-card.card\n        div(slot='header') Start playing a song\n        el-button(type='primary', plain, @click='playDemo')\n          icon.icon(name='music', scale='1.2')\n          span.text Play a demo song\n      el-card.card\n        div(slot='header')\n          span Spread the love\n          el-button.copy(\n            type='text',\n            v-clipboard:copy='url + room',\n            v-clipboard:success='copySuccess'\n          ) Copy to clipboard\n        span Share this link with friends so they can listen with you\n        el-input(v-model='room', :id='roomInUse ? \"invalid\" : undefined').link\n          template(slot='prepend') {{ url }}\n</template>\n\n<script>\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      room: Math.random().toString(36).substr(2, 5).toUpperCase(),\n      url: window.location.origin + '/listen/',\n      lastChanged: Date.now(),\n      roomInUse: false,\n      accessToken: null,\n      device_id: null,\n      player: null,\n      switchedToPlayer: false,\n      spotify: null,\n      state: null\n    }\n  },\n  created () {\n    let spotifyPlayer = document.createElement('script')\n    spotifyPlayer.setAttribute('src', '//sdk.scdn.co/spotify-player.js')\n    document.head.appendChild(spotifyPlayer)\n\n    window.onSpotifyPlayerAPIReady = this.playerReady\n  },\n  methods: {\n    playerReady () {\n      const player = new window.Spotify.Player({\n        name: 'Spotsync',\n        getOAuthToken: cb => {\n          this.$axios.post('/auth/token')\n            .then(res => {\n              this.createSpotifyInstance(res.data)\n              cb(res.data)\n            })\n            .catch(err => {\n              if (err.response.status === 404) {\n                this.$router.push({ path: '/login', query: { origin: window.location.pathname } })\n              }\n            })\n        }\n      })\n\n      // Error handling\n      player.on('initialization_error', e => this.$message.error(e.message))\n      player.on('authentication_error', e => {\n        if (e.message === 'Authentication failed') {\n          window.location.replace('/auth/login?origin=' + window.location.pathname)\n        } else {\n          this.$message.error(e.message)\n        }\n      })\n      player.on('account_error', e => {\n        this.$alert('Spotify requires users to have premium.', 'Premium Required', {\n          type: 'error',\n          showClose: false,\n          showConfirmButton: false,\n          closeOnClickModal: false,\n          closeOnPressEscape: false\n        })\n      })\n      player.on('playback_error', e => this.$message.error(e.message))\n\n      // Playback status updates\n      player.on('player_state_changed', state => {\n        // emit the change\n        state.timestamp = Date.now()\n        this.emitState(state)\n        this.state = state\n      })\n\n      // Ready\n      player.on('ready', data => {\n        console.log('Ready with Device ID', data.device_id)\n        this.device_id = data.device_id\n        this.switchToPlayer()\n      })\n\n      // Connect to the player\n      player.connect()\n      this.player = player\n    },\n    createSpotifyInstance (accessToken) {\n      this.accessToken = accessToken\n      this.spotify = this.$axios.create({\n        baseURL: 'https://api.spotify.com/v1/',\n        headers: {\n          Authorization: 'Bearer ' + accessToken\n        }\n      })\n    },\n    setupStream () {\n      this.$socket.emit('stream', this.room, (success) => {\n        this.roomInUse = !success\n      })\n    },\n    switchToPlayer () {\n      let data = {\n        device_ids: [ this.device_id ],\n        play: true\n      }\n\n      this.spotify.put('/me/player', data)\n    },\n    openSpotify (type) {\n      if (type === 'web') {\n        window.open('https://open.spotify.com')\n      } else {\n        window.location.replace('spotify:')\n      }\n    },\n    playDemo () {\n      this.spotify.put('/me/player/play?device_id=' + this.device_id, { uris: ['spotify:track:4RXpgGM7A4Hg7cFBoH5KyF'] })\n    },\n    copySuccess () {\n      this.$message.success('Link copied to clipboard')\n    },\n    emitState (state) {\n      // update state if given\n      state ? this.state = state : state = this.state\n\n      // define state to be shared with listeners\n      let sharedState = {\n        context: state.context,\n        paused: state.paused,\n        // add difference to position\n        position: state.position + (Date.now() - state.timestamp),\n        timestamp: Date.now(),\n        track_window: state.track_window\n      }\n\n      // send shared state\n      this.$socket.emit('update', sharedState)\n    }\n  },\n  watch: {\n    room () {\n      this.setupStream()\n    }\n  },\n  sockets: {\n    connect () {\n      this.setupStream()\n    },\n    request () {\n      const startTime = Date.now()\n      this.player.getCurrentState().then((state) => {\n        state.position += Date.now() - startTime\n        setTimeout(() => this.player.seek(state.position + 1000), 1000)\n      })\n    },\n    toomanyrequests () {\n      this.$message.error('Too many requests. Please try again later.')\n    },\n    disconnect () {\n      this.$alert('You are temporarily suspended', 'Too many requests', {\n        type: 'error',\n        showClose: false,\n        showConfirmButton: false,\n        closeOnClickModal: false,\n        closeOnPressEscape: false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.header {\n  color: white;\n}\n\n.card {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.icon {\n  position: relative;\n  top: 2px;\n}\n\n.text {\n  font-size: 20px;\n  margin-left: 5px;\n}\n\n.copy {\n  float: right;\n  padding: 3px 0;\n}\n\n.link {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n</style>\n\n<style>\n  input#invalid {\n    border-color: #f56c6c;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(!this.device_id),expression:\"!this.device_id\",modifiers:{\"fullscreen\":true,\"lock\":true}}]},[_c('el-col',{attrs:{\"lg\":{ span: 10, offset: 7 },\"sm\":{ span: 14, offset: 5 },\"xs\":{ span: 24 }}},[_c('h1',{staticClass:\"header\"},[_vm._v(\"Start streaming\")]),_c('el-card',{staticClass:\"card\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Open Spotify\")]),_c('el-button',{staticClass:\"copy\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.openSpotify('web')}}},[_vm._v(\"Open Web App\")])],1),_c('el-button',{staticClass:\"open\",attrs:{\"type\":\"success\"},on:{\"click\":_vm.openSpotify}},[_c('icon',{staticClass:\"icon\",attrs:{\"name\":\"spotify\",\"scale\":\"1.2\"}}),_c('span',{staticClass:\"text\"},[_vm._v(\"Open Spotify\")])],1)],1),_c('el-card',{staticClass:\"card\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"Start playing a song\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"plain\"},on:{\"click\":_vm.playDemo}},[_c('icon',{staticClass:\"icon\",attrs:{\"name\":\"music\",\"scale\":\"1.2\"}}),_c('span',{staticClass:\"text\"},[_vm._v(\"Play a demo song\")])],1)],1),_c('el-card',{staticClass:\"card\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Spread the love\")]),_c('el-button',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(_vm.url + _vm.room),expression:\"url + room\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.copySuccess),expression:\"copySuccess\",arg:\"success\"}],staticClass:\"copy\",attrs:{\"type\":\"text\"}},[_vm._v(\"Copy to clipboard\")])],1),_c('span',[_vm._v(\"Share this link with friends so they can listen with you\")]),_c('el-input',{staticClass:\"link\",attrs:{\"id\":_vm.roomInUse ? \"invalid\" : undefined},model:{value:(_vm.room),callback:function ($$v) {_vm.room=$$v},expression:\"room\"}},[_c('template',{slot:\"prepend\"},[_vm._v(_vm._s(_vm.url))])],2)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-563389c8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-563389c8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-563389c8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-563389c8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-563389c8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Home.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('h1',{staticClass:\"header\"},[_vm._v(\"To continue... please login with Spotify\")]),_c('a',{staticClass:\"link\",attrs:{\"href\":\"/auth/login\"}},[_c('el-button',{staticClass:\"login\",attrs:{\"type\":\"success\"}},[_c('icon',{staticClass:\"icon\",attrs:{\"name\":\"spotify\",\"scale\":\"1.2\"}}),_c('span',{staticClass:\"text\"},[_vm._v(\"Login with Spotify\")])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b4fae5e0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b4fae5e0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b4fae5e0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b4fae5e0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n  div.card\n    h1.header To continue... please login with Spotify\n    a.link(href='/auth/login')\n      el-button(type='success').login\n        icon.icon(name='spotify', scale='1.2')\n        span.text Login with Spotify\n</template>\n\n<script>\nexport default {\n  name: 'Login'\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .card {\n    padding-top: 30vh;\n  }\n\n  .header {\n    text-align: center;\n    color: white;\n  }\n\n  .link {\n    text-decoration: none;\n  }\n\n  .login {\n    display: block;\n    margin: 0 auto;\n    position: relative;\n  }\n\n  .icon {\n    position: relative;\n    top: 2px;\n  }\n\n  .text {\n    font-size: 20px;\n    margin-left: 5px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","<template lang=\"pug\">\n  el-row(v-loading.fullscreen.lock='!this.device_id')\n    el-col(:md='{ span: 10, offset: 7 }', :sm='{ span: 18, offset: 6 }', :xs='{ span: 22, offset: 1 }').main\n      h1.header Currently listening to\n      el-row(:gutter='20')\n        el-col(:sm='6', :xs='8')\n          img(:src='track.image', width='100%').img\n        el-col(:sm='18', :xs='16')\n          .name {{ track.name }}\n          .artist {{ track.artists }}\n      el-button(\n        v-if='track.uri',\n        type='warning',\n        plain,\n        round,\n        @click='resync'\n      ).resync Out of sync? Click here.\n</template>\n\n<script>\nexport default {\n  name: 'Listen',\n  data () {\n    return {\n      track: {\n        name: 'Track Name',\n        uri: '',\n        image: '',\n        artists: 'Artist',\n        position: 0,\n        paused: false,\n        timestamp: Date.now()\n      },\n      offset: {\n        list: [],\n        amount: null\n      },\n      timeout: null,\n      device_id: null,\n      player: null,\n      spotify: null\n    }\n  },\n  created () {\n    let spotifyPlayer = document.createElement('script')\n    spotifyPlayer.setAttribute('src', '//sdk.scdn.co/spotify-player.js')\n    document.head.appendChild(spotifyPlayer)\n\n    window.onSpotifyPlayerAPIReady = this.playerReady\n  },\n  methods: {\n    playerReady () {\n      const player = new window.Spotify.Player({\n        name: 'Spotsync',\n        getOAuthToken: cb => {\n          this.$axios.post('/auth/token')\n            .then(res => {\n              this.createSpotifyInstance(res.data)\n              cb(res.data)\n            })\n            .catch(err => {\n              if (err.response.status === 404) {\n                this.$router.push({ path: '/login', query: { origin: window.location.pathname } })\n              }\n            })\n        }\n      })\n\n      // Error handling\n      player.on('initialization_error', e => this.$message.error(e.message))\n      player.on('authentication_error', e => {\n        if (e.message === 'Authentication failed') {\n          window.location.replace('/auth/login?origin=' + window.location.pathname)\n        } else {\n          this.$message.error(e.message)\n        }\n      })\n      player.on('account_error', e => {\n        this.$alert('Spotify requires users to have premium.', 'Premium Required', {\n          type: 'error',\n          showClose: false,\n          showConfirmButton: false,\n          closeOnClickModal: false,\n          closeOnPressEscape: false\n        })\n      })\n      player.on('playback_error', e => this.$message.error(e.message))\n\n      // Ready\n      player.on('ready', data => {\n        console.log('Ready with Device ID', data.device_id)\n        this.device_id = data.device_id\n\n        // start listening\n        this.$socket.emit('listen', this.$route.params.room, success => {\n          if (!success) this.$router.push('/notfound')\n        })\n      })\n\n      // Connect to the player\n      player.connect()\n      this.player = player\n    },\n    createSpotifyInstance (accessToken) {\n      this.accessToken = accessToken\n      this.spotify = this.$axios.create({\n        baseURL: 'https://api.spotify.com/v1/',\n        headers: {\n          Authorization: 'Bearer ' + accessToken\n        }\n      })\n    },\n    sync () {\n      if (!this.offset.amount) {\n        this.calculateOffset()\n      } else {\n        this.player.seek(this.track.position + Date.now() - this.track.timestamp + this.offset.amount)\n          .then(() => this.player.getCurrentState()\n            .then(state => {\n              if (state) {\n                let shouldBeAt = this.track.position + Date.now() - this.track.timestamp\n                let isCurrentlyAt = state.position\n                let offset = isCurrentlyAt - shouldBeAt\n                this.player.seek(state.position - offset + this.offset.amount)\n              } else {\n                this.sync()\n              }\n            })\n          )\n      }\n    },\n    calculateOffset () {\n      let previousOffset = this.offset.list[this.offset.list.length - 1] || 0\n      this.player.seek(this.track.position + Date.now() - this.track.timestamp)\n        .then(() => this.player.getCurrentState()\n          .then(state => {\n            if (state) {\n              let shouldBeAt = this.track.position + Date.now() - this.track.timestamp\n              let isCurrentlyAt = state.position\n              let offset = isCurrentlyAt - shouldBeAt\n              this.offset.list.push(-offset)\n              if (Math.abs(offset) < Math.abs(previousOffset) / 3) {\n                this.offset.list = [ -offset ]\n              }\n              if (this.offset.list.length === 4) {\n                this.offset.amount = this.offset.list.reduce((a, c) => a + c) / 4\n              }\n              console.log(this.offset.amount)\n              console.log(this.offset.list)\n              setTimeout(this.resync, Math.max(Math.min(Math.abs(previousOffset), 1500), 100))\n            } else {\n              this.calculateOffset()\n            }\n          })\n        )\n    },\n    resync () {\n      this.$socket.emit('request', (tooMany) => {\n        if (tooMany) {\n          this.$message.error('Too many requests. You will be synced in 7 seconds automatically.')\n          if (!this.timeout) this.timeout = setTimeout(this.resync, 7000)\n        } else if (this.timeout) {\n          this.timeout = null\n        }\n      })\n    }\n  },\n  sockets: {\n    update (status) {\n      if (status.paused) {\n        this.player.pause()\n        this.track.paused = true\n      } else {\n        let playingSong = this.track.uri === status.track_window.current_track.uri\n\n        // set track data\n        this.track.name = status.track_window.current_track.name\n        this.track.artists = status.track_window.current_track.artists.map(obj => obj.name).join(', ')\n        this.track.image = status.track_window.current_track.album.images[0].url\n        this.track.uri = status.track_window.current_track.uri\n        this.track.position = status.position\n        this.track.timestamp = Date.now()\n\n        // resume playing if paused\n        if (this.track.paused) {\n          this.player.resume()\n          this.track.paused = false\n        }\n\n        // seek if playing song, otherwise start playing the song\n        if (playingSong) {\n          this.sync()\n        } else {\n          this.spotify.put('/me/player/play?device_id=' + this.device_id, { uris: [ this.track.uri ] })\n            .then(this.sync)\n        }\n      }\n    },\n    toomanyrequests () {\n      this.$message.error('Too many requests. Please try again later.')\n    },\n    disconnect () {\n      this.$alert('You are temporarily suspended', 'Too many requests', {\n        type: 'error',\n        showClose: false,\n        showConfirmButton: false,\n        closeOnClickModal: false,\n        closeOnPressEscape: false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  margin-top: 10vh;\n}\n\n.header { color: rgb(240, 240, 240); }\n\n.img {\n  border-radius: 10px;\n  box-shadow: 0px 0.5px 0.5px;\n}\n\n.name {\n  font-size: 40px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.artist {\n  color: rgb(40, 40, 40);\n  font-size: 20px;\n}\n\n.resync {\n  min-width: 50%;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Listen.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(!this.device_id),expression:\"!this.device_id\",modifiers:{\"fullscreen\":true,\"lock\":true}}]},[_c('el-col',{staticClass:\"main\",attrs:{\"md\":{ span: 10, offset: 7 },\"sm\":{ span: 18, offset: 6 },\"xs\":{ span: 22, offset: 1 }}},[_c('h1',{staticClass:\"header\"},[_vm._v(\"Currently listening to\")]),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"sm\":6,\"xs\":8}},[_c('img',{staticClass:\"img\",attrs:{\"src\":_vm.track.image,\"width\":\"100%\"}})]),_c('el-col',{attrs:{\"sm\":18,\"xs\":16}},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.track.name))]),_c('div',{staticClass:\"artist\"},[_vm._v(_vm._s(_vm.track.artists))])])],1),(_vm.track.uri)?_c('el-button',{staticClass:\"resync\",attrs:{\"type\":\"warning\",\"plain\":\"plain\",\"round\":\"round\"},on:{\"click\":_vm.resync}},[_vm._v(\"Out of sync? Click here.\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a373fb84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Listen.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a373fb84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Listen.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Listen.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a373fb84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Listen.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a373fb84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Listen.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{staticClass:\"main\",attrs:{\"md\":{ span: 10, offset: 7 },\"sm\":{ span: 12, offset: 6 },\"xs\":{ span: 22, offset: 1 }}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('icon',{staticClass:\"icon-stack\",attrs:{\"label\":\"No Music\",\"scale\":\"4\"}},[_c('icon',{staticClass:\"icon-headphones\",attrs:{\"name\":\"volume-up\"}}),_c('icon',{staticClass:\"icon-ban\",attrs:{\"name\":\"ban\",\"scale\":\"2\"}})],1)],1),_c('el-col',{attrs:{\"span\":18}},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Can't hear anything?\")]),_c('p',{staticClass:\"subtitle\"},[_vm._v(\"We think you may have entered the link incorrectly...\")])])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-184e1114\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NotFound.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-184e1114\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NotFound.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NotFound.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-184e1114\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NotFound.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-184e1114\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NotFound.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n  el-row\n    el-col(:md='{ span: 10, offset: 7 }', :sm='{ span: 12, offset: 6 }', :xs='{ span: 22, offset: 1 }').main\n      el-row(:gutter='20')\n        el-col(:span='6')\n          icon(label='No Music', scale='4').icon-stack\n            icon(name='volume-up').icon-headphones\n            icon(name='ban', scale='2').icon-ban\n        el-col(:span='18')\n          h1.title Can't hear anything?\n          p.subtitle We think you may have entered the link incorrectly...\n</template>\n\n<script>\nexport default {\n  name: 'NotFound'\n}\n</script>\n\n<style scoped>\n.main { margin-top: 20vh; }\n\n.icon-stack { width: 100%; }\n\n.icon-headphones { color: rgb(30, 30, 30); }\n\n.icon-ban { color: red; }\n\n.title, .subtitle { color: white; }\n\n.title { font-size: 40px; }\n\n.subtitle { font-size: 20px; }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NotFound.vue","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from '@/components/Home'\nimport Login from '@/components/Login'\nimport Listen from '@/components/Listen'\nimport NotFound from '@/components/NotFound'\n\nVue.use(Router)\n\nexport default new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/',\n      name: 'Home',\n      component: Home\n    },\n    {\n      path: '/login',\n      name: 'Login',\n      component: Login\n    },\n    {\n      path: '/listen/:room',\n      name: 'Listen',\n      component: Listen\n    },\n    {\n      path: '/notfound',\n      name: 'NotFound',\n      component: NotFound\n    },\n    // redirect to default welcome page\n    { path: '*', redirect: '/' }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport Icon from 'vue-awesome/components/Icon'\nimport 'vue-awesome/icons'\nimport VueClipboard from 'vue-clipboard2'\nimport VueSocketio from 'vue-socket.io'\n\nimport axios from 'axios'\n\n// setup elementUI, vue-awesome, vue-clipboard2, and vue-socket.io\nVue.use(ElementUI)\nVue.component('icon', Icon)\nVue.use(VueClipboard)\nVue.use(VueSocketio, '/')\n\n// add axios through the Vue object\nObject.defineProperty(Vue.prototype, '$axios', { value: axios })\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}